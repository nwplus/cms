(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{173:function(e,t,n){"use strict";n.d(t,"a",function(){return d});n(37),n(104),n(105),n(16),n(51),n(52),n(36),n(50);var r=n(7),o=n(175),c=n.n(o);n(177),n(178),n(179);if(!c.a.apps.length){c.a.initializeApp({apiKey:"AIzaSyCBkQHeikIsiYZ2yOHiqH_mGJKDWMDU500",authDomain:"nwhacks-2019.firebaseapp.com",databaseURL:"https://nwhacks-2019.firebaseio.com",projectId:"nwhacks-2019",storageBucket:"nwhacks-2019",messagingSenderId:"98283589440"})}var d=c.a.auth();d.setPersistence(c.a.auth.Auth.Persistence.SESSION);var l=c.a.firestore(),v=c.a.storage(),f="Website_content",m={isAdmin:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t){var n,r,o,c,d,v,f,m,col;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.collection("admins"),e.next=3,n.get();case 3:r=e.sent.docs,o=!0,c=!1,d=void 0,e.prev=7,v=r[Symbol.iterator]();case 9:if(o=(f=v.next()).done){e.next=20;break}return m=f.value,col=n.doc(m.id),e.next=14,col.get();case 14:if(e.sent.data().email!==t){e.next=17;break}return e.abrupt("return",!0);case 17:o=!0,e.next=9;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(7),c=!0,d=e.t0;case 26:e.prev=26,e.prev=27,o||null==v.return||v.return();case 29:if(e.prev=29,!c){e.next=32;break}throw d;case 32:return e.finish(29);case 33:return e.finish(26);case 34:return e.abrupt("return",!1);case 35:case"end":return e.stop()}},e,null,[[7,22,26,34],[27,,29,33]])}));return function(t){return e.apply(this,arguments)}}(),getWebsites:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.collection(f),e.next=3,t.get();case 3:return e.t0=function(e){return e.id},e.abrupt("return",e.sent.docs.map(e.t0));case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getIntroText:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t,n,r,o,c,d,v,h,x;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getWebsites();case 2:t=e.sent,n={},r=!0,o=!1,c=void 0,e.prev=7,d=t[Symbol.iterator]();case 9:if(r=(v=d.next()).done){e.next=18;break}return h=v.value,e.next=13,l.collection(f).doc(h).get();case 13:x=e.sent.data(),n[h]={introText:x.IntroText?x.IntroText.toString():"",introSubtext:x.IntroSubtext?x.IntroSubtext.toString():"",introLastEditedBy:x.IntroLastEditedBy||void 0,introLastEditedDate:x.IntroLastEditedDate||void 0,introButtonEnabled:x.IntroButtonEnabled,introButtonLink:x.IntroButtonLink,introSignUpText:x.SignUpText};case 15:r=!0,e.next=9;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(7),o=!0,c=e.t0;case 24:e.prev=24,e.prev=25,r||null==d.return||d.return();case 27:if(e.prev=27,!o){e.next=30;break}throw c;case 30:return e.finish(27);case 31:return e.finish(24);case 32:return e.abrupt("return",n);case 33:case"end":return e.stop()}},e,null,[[7,20,24,32],[25,,27,31]])}));return function(){return e.apply(this,arguments)}}(),getEvents:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t,n,r,o,c,d,v,h,x;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getWebsites();case 2:t=e.sent,n={},r=!0,o=!1,c=void 0,e.prev=7,d=t[Symbol.iterator]();case 9:if(r=(v=d.next()).done){e.next=20;break}return h=v.value,e.next=13,l.collection(f).doc(h).collection("Events").get();case 13:return x=e.sent,e.next=16,x.docs.map(function(e){var data=e.data();return{id:e.id,title:data.title,text:data.text||"",order:data.order,imageLink:data.imageLink||"",eventLink:data.eventLink||"",signupLink:data.signupLink||"",eventLastEditedBy:data.eventLastEditedBy||void 0,eventLastEditedDate:data.eventLastEditedDate||void 0,enabled:data.enabled}});case 16:n[h]=e.sent;case 17:r=!0,e.next=9;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(7),o=!0,c=e.t0;case 26:e.prev=26,e.prev=27,r||null==d.return||d.return();case 29:if(e.prev=29,!o){e.next=32;break}throw c;case 32:return e.finish(29);case 33:return e.finish(26);case 34:return e.abrupt("return",n);case 35:case"end":return e.stop()}},e,null,[[7,22,26,34],[27,,29,33]])}));return function(){return e.apply(this,arguments)}}(),addEvent:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.collection(f).doc(t).collection("Events"),e.next=3,r.add({title:n.title||"",order:parseInt(n.order)||-1,text:n.text||"",eventLink:n.eventLink||"",learnMoreLink:n.learnMoreLink||"",signupLink:n.signupLink||"",imageLink:n.imageLink||"",enabled:!0});case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),updateEvent:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.collection(f).doc(t).collection("Events").doc(n.id),e.next=3,r.update({title:n.title||"",order:parseInt(n.order)||-1,text:n.text||"",eventLink:n.eventLink||"",learnMoreLink:n.learnMoreLink||"",signupLink:n.signupLink||"",imageLink:n.imageLink||""});case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),updateEventEnabled:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.collection(f).doc(t).collection("Events").doc(n.id),e.next=3,r.update({enabled:n.enabled});case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),updateIntroText:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t,n,r,o,c){var d,v,m,h,x=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d=x.length>5&&void 0!==x[5]?x[5]:void 0,v=x.length>6&&void 0!==x[6]?x[6]:void 0,m=x.length>7&&void 0!==x[7]?x[7]:void 0,h=l.collection(f).doc(t),e.next=6,h.update({IntroText:n,IntroSubtext:r,IntroLastEditedBy:o,IntroLastEditedDate:c,IntroButtonEnabled:d||!1,IntroButtonLink:v||"",SignUpText:m||""});case 6:case"end":return e.stop()}},e)}));return function(t,n,r,o,c){return e.apply(this,arguments)}}(),addSponsorInformation:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.collection(f).doc(t).collection("Sponsors"),e.next=3,r.add({image:n.image,name:n.name,url:n.url});case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),uploadImages:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t,n){var r,o,c,d,l,f,m,h,x;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=[],o=!0,c=!1,d=void 0,e.prev=4,l=n[Symbol.iterator]();case 6:if(o=(f=l.next()).done){e.next=33;break}return m=f.value,e.prev=8,h=v.ref("".concat(t,"/").concat(m.name)),e.next=12,h.put(m);case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(8),console.log(e.t0),r.push(m.name);case 18:return e.prev=18,e.next=21,this.addSponsorInformation(t,{image:m.name,name:m.sponsorName.trim(),url:m.url.trim()});case 21:e.next=30;break;case 23:return e.prev=23,e.t1=e.catch(18),x=v.ref("".concat(t,"/").concat(m.name)),e.next=28,x.delete();case 28:console.log(e.t1),r.push(m.name);case 30:o=!0,e.next=6;break;case 33:e.next=39;break;case 35:e.prev=35,e.t2=e.catch(4),c=!0,d=e.t2;case 39:e.prev=39,e.prev=40,o||null==l.return||l.return();case 42:if(e.prev=42,!c){e.next=45;break}throw d;case 45:return e.finish(42);case 46:return e.finish(39);case 47:return e.abrupt("return",r);case 48:case"end":return e.stop()}},e,this,[[4,35,39,47],[8,14],[18,23],[40,,42,46]])}));return function(t,n){return e.apply(this,arguments)}}(),get:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t,n){var r,data,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n!==t){e.next=6;break}return r=l.collection(f).doc(t),e.next=4,r.get();case 4:return data=e.sent,e.abrupt("return",data.data());case 6:return o=l.collection(f).doc(t).collection(n),e.next=9,o.get();case 9:return e.t0=function(e){return{id:e.id,data:e.data()}},e.abrupt("return",e.sent.docs.map(e.t0));case 11:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),update:function(e,t,n,object){l.collection(f).doc(e).collection(t).doc(n).update(object)},add:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t,n,object){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.collection(f).doc(t).collection(n).add(object);case 2:return r=e.sent,e.abrupt("return",r.id);case 4:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),delete:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.collection(f).doc(t).collection(n).doc(r).delete();case 2:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),getTimestamp:function(){return c.a.firestore.Timestamp.now()}};t.b=m},186:function(e,t,n){var content=n(216);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(35).default)("43afdb50",content,!0,{sourceMap:!1})},214:function(e,t,n){e.exports=n.p+"img/5b873ef.svg"},215:function(e,t,n){"use strict";var r=n(186);n.n(r).a},216:function(e,t,n){(e.exports=n(34)(!1)).push([e.i,".nwpluslogo[data-v-ebfbb7d6]{height:40px;padding-right:30%}.centered[data-v-ebfbb7d6]{padding-top:15%}#error-message[data-v-ebfbb7d6]{color:red}",""])},221:function(e,t,n){"use strict";n.r(t);var r=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"level"},[t("div",{staticClass:"level-item has-text-centered"},[t("div",[t("img",{staticClass:"nwpluslogo",attrs:{src:n(214),alt:"nwplus logo"}})])]),this._v(" "),t("div",{staticClass:"level-item has-text-centered"},[t("div",[t("p",{staticClass:"title has-text-light"},[this._v("\n              nwPlus Content Management System\n            ")])])])])}],o=(n(50),n(7)),c=n(175),d=n.n(c),l=n(173),v={name:"Login",data:function(){return{error_message:"",buttonState:""}},asyncData:function(e){var t=e.redirect;l.a.onAuthStateChanged(function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n,!e.t0){e.next=5;break}return e.next=4,l.b.isAdmin(n.email);case 4:e.t0=e.sent;case 5:if(!e.t0){e.next=9;break}t("/cms"),e.next=10;break;case 9:n&&t("/signUp");case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},methods:{googleSignIn:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.buttonState="is-loading",this.provider=new d.a.auth.GoogleAuthProvider,e.prev=2,e.next=5,d.a.auth().setPersistence(d.a.auth.Auth.Persistence.SESSION);case 5:return e.next=7,l.a.signInWithPopup(this.provider);case 7:return t=e.sent,e.next=10,l.b.isAdmin(t.user.email);case 10:if(e.sent){e.next=13;break}return this.$router.push("/signUp"),e.abrupt("return");case 13:this.$router.push("/cms"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),"permission-denied"===e.t0.code?this.$router.push("/signUp"):"auth/web-storage-unsupported"===e.t0.code&&(this.error_message="Please enable 3rd party cookies");case 19:case"end":return e.stop()}},e,this,[[2,16]])}));return function(){return e.apply(this,arguments)}}()}},f=(n(215),n(19)),component=Object(f.a)(v,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("section",{staticClass:"hero has-background-black centered is-fullheight"},[n("div",{staticClass:"container has-text-centered"},[e._m(0),e._v(" "),n("b-button",{attrs:{type:e.buttonState+" is-primary"},on:{click:e.googleSignIn}},[e._v("Login")]),e._v(" "),n("p",{attrs:{id:"error-message"}},[e._v(e._s(e.error_message))])],1)])])},r,!1,null,"ebfbb7d6",null);t.default=component.exports}}]);